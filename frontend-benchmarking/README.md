# Benchmarking Energy Consumption of Frontend Frameworks

This repository aims to benchmark the energy consumption of frontend scenarios by automating user interactions and analyzing power consumption data. You can find the benchmark dataset on [Google Drive](https://drive.google.com/file/d/1-UL1eXERxgN5thtZQLVLnYdYK63Pdj_f/view?usp=sharing). More details on this project [here](https://berger-levrault.atlassian.net/wiki/x/IIE2LQ).

---

## Repository Structure

```
.
├── main.ipynb             # Notebook for data analysis and visualization of benchmark results
├── scripts/               # Folder containing automation scripts
│   ├── create.py          # Automated creation of multiple users with profiler download and one profiler per execution (individual profiling)
│   └── create_once.py     # Automated creation of users with one profiler per framework (batch profiling)
└── data/                  # Folder containing captured profiler data from scripts
```

---

## Prerequisites

-   Python 3.x

---

## scripts/create.py — Automated User Creation with profiler download and one profiler per execution

### Description:

This script:

-   Automatically fills the form and creates users in the app (React or Angular).
-   Downloads profiler `.json` data after each user creation.
-   Saves profiler data in: `data/create/{total}/{app}/{i}.json`.

### Arguments:

| Argument | Type | Description                           | Required       |
| -------- | ---- | ------------------------------------- | -------------- |
| --app    | str  | The app to test: `react` or `angular` | Yes            |
| --total  | int  | Number of users to create             | No (default=1) |

---

### Usage example:

```bash
python scripts/create.py --app react --total 10
```

Creates 10 users and downloads a profiler after each one:

```
data/create/10/react/1.json
data/create/10/react/2.json
...
data/create/10/react/10.json
```

---

### Important Notes:

-   `upload_button` variable → Coordinates of the upload button in the profiler UI → Must be adapted to your screen.
-   Actions simulated:
    -   Tab navigation
    -   User creation
    -   Profiler download
    -   Refresh between each user
-   Profiler files must be saved by Firefox to `~/Downloads/`.

---

## scripts/create_once.py — Automated User Creation with one profiler per framework

### Description:

This script:

-   Creates multiple users continuously in a single profiler session.
-   Download manually only one profiler `.json` after all users are created.

You will have to save manually profiler data in: `data/create_once/{total}/{app}.json`.

### Arguments:

| Argument | Type | Description               | Required       |
| -------- | ---- | ------------------------- | -------------- |
| --total  | int  | Number of users to create | No (default=1) |

---

### Usage example:

```bash
python scripts/create_once.py --total 50
```

Creates 50 users continuously and downloads a single profiler result:

---

### Important Notes:

-   `reset_focus` variable → Coordinates to click and reset browser focus before keyboard simulation → Must be adapted to your screen.
-   Profiler files must manually download to `~/Downloads/`.

## Data folders summary

| Folder                        | Generated by     | Contains                                            |
| ----------------------------- | ---------------- | --------------------------------------------------- |
| `data/create/{total}/{app}/`  | `create.py`      | Multiple profiler json files (individual profiling) |
| `data/create_once/{app}.json` | `create_once.py` | Single profiler json file (batch profiling)         |

---

## How to Get Button Coordinates (PyAutoGUI)

Since PyAutoGUI interacts with specific screen coordinates, you'll need to get the position of buttons on your screen.

### Using PyAutoGUI

```python
import pyautogui
import time

print("Move your mouse to the desired position...")
time.sleep(5)
print(pyautogui.position())
```

### Using Accessibility Inspector on macOS

1. Search for **Accessibility Inspector** and open the app.
2. Click on the **target icon** (top-right of the app window).
3. Select the element you want to inspect on the screen.
4. Return to the Accessibility Inspector — you will find the **x** and **y** values under the `Position` attribute.
